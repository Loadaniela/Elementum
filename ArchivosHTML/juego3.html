<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/juego3.css">
    <link rel="icon" href="/Imagenes/icon-512x512.png">
</head>
   <body>
    <main>
        
       
        <input type="checkbox" id="toggle">
        <label for="toggle" class="hamburger">
            <span></span>
            <span></span>
            <span></span>
        </label>
        <nav class="menu">
            <ul>
                <li><a href="#">PERFIL DEL JUGADOR</a></li>
                <p><strong style="color: orange;">Jugador:</strong> <span id="nombre" style="color: white;"></span></p>
                <p><strong style="color: orange;">Correo:</strong> <span id="correo" style="color: white;"></span></p>
                <p><strong style="color: orange;">Usuario:</strong> <span id="usuario" style="color: white;"></span></p>
                <li><a href="pagina1.html">Menú Principal</a></li>
                <li><a href="login.html" id="logout">Cerrar sesión</a></li>
                <img src="Imagenes/oncahui.png" alt="panda" width="220" height="350">
            </ul>
        </nav>




    <!--titulo y opciones-->
    <div id="menuoculto">
        <a id="menu1" href="juego3.html">Elementos Nuevos</a>
        <a id="menu2" href="#">Arrastra los elementos asignados en gris, conforme a la carga de radio atómico que te muestra.</a>
 </div>
    <!--ELEMENTOS DE LA TABLA PERIODICA-->  

    <div class="contenedores">
        <p class="arrastres"><strong style="color: orange;">Número de arrastres realizados:</strong> <span id="contadorArrastres" style="color: white;">0</span></p>

        <h1 class="glitch"  data-text="Elementum">RADIO ATÓMICO</h1>
        <!--INICIA EL BLOQUE S-->
       <div class="gas" id="eq1" data-nombre="Hidrógeno" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
       
       <div class="alcalino" id="eq3" data-nombre="Litio" ondrop="drop(event)" ondragover="allowDrop(event)">   
        <p><strong>167</strong></p>
    </div>
       
       <div class="alcalino" id="eq11" data-nombre="Sodio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="alcalino" id="eq19" data-nombre="Potasio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="alcalino" id="eq37" data-nombre="Rubidio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="alcalino" id="eq55" data-nombre="Cesio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="alcalino" id="eq87" data-nombre="Francio" ondrop="drop(event)" ondragover="allowDrop(event)"> 
       <p><strong>348</strong></p>
        </div>
         
       <div class="alcalinoterreos" data-nombre="Berilio" id="eq4" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
           
       <div class="alcalinoterreos" id="eq12" data-nombre="Magnesio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
           
       <div class="alcalinoterreos" id="eq20" data-nombre="Calcio" ondrop="drop(event)" ondragover="allowDrop(event)">
          <p><strong>194</strong></p> 
       </div>
       
       <div class="alcalinoterreos" id="eq38" data-nombre="Estroncio" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>219</strong></p>
        </div>
           
       <div class="alcalinoterreos" id="eq56" data-nombre="Bario" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
           
       <div class="alcalinoterreos" id="eq88" data-nombre="Radio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       <!--AQUI TERMINA EL BLOQUE S-->
       <!--AQUI INICIA EL BLOQUE D-->
             
       <div class="transicion" id="eq21" data-nombre="Escandio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
               
       <div class="transicion" id="eq39" data-nombre="Itrio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>212</strong></p>
        </div>
               
       <div class="lantanidos" id="eq5771" data-nombre="Lutecio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong> 217</strong></p>
        </div>
               
       <div class="actinidos" id="eq89103" data-nombre="Lawrencio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
               
       <div class="transicion" id="eq22" data-nombre="Titanio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
               
       <div class="transicion" id="eq40" data-nombre="Circonio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
               
       <div class="transicion" id="eq72" data-nombre="Hafnio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
               
       <div class="transicion" id="eq104" data-nombre="Rutherfordio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                 
       <div class="transicion" id="eq23" data-nombre="Vanadio" ondrop="drop(event)" ondragover="allowDrop(event)"> 
       <p><strong>171</strong></p>
        </div>
                 
       <div class="transicion" id="eq41" data-nombre="Niobio" ondrop="drop(event)" ondragover="allowDrop(event)">
        
       </div>
                 
       <div class="transicion" id="eq73" data-nombre="Tántalo" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                 
       <div class="transicion" id="eq105" data-nombre="Dubnio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
            
       <div class="transicion" id="eq24" data-nombre="Cromo" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>166</strong></p>
        </div>
                   
       <div class="transicion" id="eq42" data-nombre="Molibdeno" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq74" data-nombre="Wolframio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq106" data-nombre="Seaborgio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                     
       <div class="transicion" id="eq25" data-nombre="Manganeso" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>161</strong></p>
        </div>
                   
       <div class="transicion" id="eq43" data-nombre="Tecnecio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq75" data-nombre="Renio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq107" data-nombre="Bohrio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
          
       <div class="transicion" id="eq26" data-nombre="Hierro" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>156</strong></p>
        </div>
                   
       <div class="transicion" id="eq44" data-nombre="Rutenio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq76" data-nombre="Osmio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq108" data-nombre="Hassio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
            
       <div class="transicion" id="eq27" data-nombre="Cobalto" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq45" data-nombre="Rodio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq77" data-nombre="Iridio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>180</strong></p>
        </div>
                   
       <div class="transicion" id="eq109" data-nombre="Meitnerio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
              
       <div class="transicion" id="eq28" data-nombre="Níquel" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq46" data-nombre="Paladio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq78" data-nombre="Platino" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq110" data-nombre="Darmstadtio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>128</strong></p>
        </div>
                
       <div class="transicion" id="eq29" data-nombre="Cobre" ondrop="drop(event)" ondragover="allowDrop(event)">
        <p><strong>145</strong></p>
        </div>
                   
       <div class="transicion" id="eq47" data-nombre="Plata" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq79" data-nombre="Oro" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>174</strong></p>
        </div>
                   
       <div class="transicion" id="eq111" data-nombre="Roentgenio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                  
       <div class="transicion" id="eq30" data-nombre="Zinc" ondrop="drop(event)" ondragover="allowDrop(event)">
        <p><strong>142</strong></p>
    </div>
                   
       <div class="transicion" id="eq48" data-nombre="Cadmio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq80" data-nombre="Mercurio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                   
       <div class="transicion" id="eq112" data-nombre="Copernicio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       <!--AQUI TERMINA EL BLOQUE D-->
                     
       <div class="metaloides" id="eq5" data-nombre="Boro" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                       
       <div class="metales" id="eq13" data-nombre="Aluminio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                         
       <div class="metales" id="eq31" data-nombre="Galio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                         
       <div class="metales" id="eq49" data-nombre="Indio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                         
       <div class="metales" id="eq81" data-nombre="Talio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                         
       <div class="desconocidos" id="eq113" data-nombre="Nihonio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                       
       <div class="gas" id="eq6" data-nombre="Carbono" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="metaloides" id="eq14" data-nombre="Silicio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>111</strong></p>
        </div>
       
       <div class="metaloides" id="eq32" data-nombre="Germanio" ondrop="drop(event)" ondragover="allowDrop(event)"><!--AQUI ME QUEDE-->
       </div>
       
       <div class="metales" id="eq50" data-nombre="Estaño" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="metales" id="eq82" data-nombre="Plomo" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>154</strong></p>
        </div>
       
       <div class="desconocidos" id="eq114" data-nombre="Flerovio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                         
       <div class="gas" id="eq7" data-nombre="Nitrógeno" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="gas" id="eq15" data-nombre="Fósforo" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>98</strong></p>
        </div>
       
       <div class="metaloides" id="eq33" data-nombre="Arsénico" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>114</strong></p>
        </div>
       
       <div class="metaloides" id="eq51" data-nombre="Antimonio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="metales" id="eq83" data-nombre="Bismuto" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="desconocidos" id="eq115" data-nombre="Moscovio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                           
       <div class="gas" id="eq8" data-nombre="Oxígeno" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="gas" id="eq16" data-nombre="Azufre" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="gas" id="eq34" data-nombre="Selenio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="metaloides" id="eq52" data-nombre="Telurio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="metaloides" id="eq84" data-nombre="Polonio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="desconocidos" id="eq116" data-nombre="Livermorio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                             
       <div class="halogenos" id="eq9" data-nombre="Flúor" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>42</strong></p>
        </div>
       
       <div class="halogenos" id="eq17" data-nombre="Cloro" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="halogenos" id="eq35" data-nombre="Bromo" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="halogenos" id="eq53" data-nombre="Yodo" ondrop="drop(event)" ondragover="allowDrop(event)">
     <p><strong>115</strong></p>
        </div>
       
       <div class="halogenos" id="eq85" data-nombre="Astato" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="desconocidos" id="eq117" data-nombre="Tenesino" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>190</strong></p>
        </div>
                               
       <div class="nobles" id="eq2" data-nombre="Helio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
                             
       <div class="nobles" id="eq10" data-nombre="Neón" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>38</strong></p>
        </div>
       
       <div class="nobles" id="eq18" data-nombre="Argón" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>71</strong></p>
        </div>
       
       <div class="nobles" id="eq36" data-nombre="Kriptón" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="nobles" id="eq54" data-nombre="Xenón" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="nobles" id="eq86" data-nombre="Radón" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="desconocidos" data-nombre="Oganesón" id="eq118" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <!--AQUI TERMINA EL BLOQUE P-->
       
       
       <!--AQUI INICIA EL BLOQUE F-->
       <div class="lantanidos" id="eq57" data-nombre="Lantano" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>240</strong></p>
        </div>
       
       <div class="lantanidos" id="eq58" data-nombre="Cerio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq59" data-nombre="Praseodimio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq60" data-nombre="Neodimio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq61" data-nombre="Prometio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>236</strong></p>
        </div>
       
       <div class="lantanidos" id="eq62" data-nombre="Samario" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq63" data-nombre="Europio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq64" data-nombre="Gadolinio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq65" data-nombre="Terbio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>225</strong></p>
        </div>
       
       <div class="lantanidos" id="eq66" data-nombre="Disprosio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq67" data-nombre="Holmio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq68" data-nombre="Erbio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq69" data-nombre="Tulio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="lantanidos" id="eq70" data-nombre="Iterbio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>222</strong></p>
        </div>
       
       <!---
       <div class="lantanidos" id="eq71" data-nombre="Lutecio" ondrop="drop(event)" ondragover="allowDrop(event)">
           <p>lutecio</p>
       </div>-->
       
       <div class="actinidos" id="eq89" data-nombre="Actinio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq90" data-nombre="Torio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq91" data-nombre="Protactinio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq92" data-nombre="Uranio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq93" data-nombre="Neptunio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq94" data-nombre="Plutonio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq95" data-nombre="Americio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>244</strong></p>
        </div>
       
       <div class="actinidos" id="eq96" data-nombre="Curio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq97" data-nombre="Berkelio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq98" data-nombre="Californio" ondrop="drop(event)" ondragover="allowDrop(event)">
      <p><strong>245</strong></p>
        </div>
       
       <div class="actinidos" id="eq99" data-nombre="Einstenio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq100" data-nombre="Fermio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       
       <div class="actinidos" id="eq101" data-nombre="Mendelevio" ondrop="drop(event)" ondragover="allowDrop(event)">
       <p><strong>246</strong></p>
        </div>
       
       <div class="actinidos" id="eq102" data-nombre="Nobelio" ondrop="drop(event)" ondragover="allowDrop(event)">
       </div>
       <!--
       <div class="actinidos" id="eq103" data-nombre="Lawrencio" ondrop="drop(event)" ondragover="allowDrop(event)">
           </div>-->
       
       </div>
       <!--AQUI TERMINA EL BLOQUE F-->

  
       <div class="ElementosAleatorios">

        <div class="elemento-arrastable draggable" id="elemento1" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento2" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento3" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento4" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento5" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento6" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento7" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento8" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento9" draggable="true" ondragstart="drag(event)"></div>
        <div class="elemento-arrastable" id="elemento10" draggable="true" ondragstart="drag(event)"></div>
        </div>
    </main>

    
  

        <!--PARA ENCONTAR LOS ELEMENTOS DEL RADIO ATOMICO de mongo db-->
   <script>
    /*Define la funcion buscar Elemento*/
        async function buscaElemento() {
    try {
         // Realiza una solicitud HTTP GET a la URL especificada para obtener datos
        const response = await fetch('http://localhost:3000/elementos/aleatorios'); // ruta hecha en prueba.js para devolver 5 aleatorios
        // Espera la respuesta a formato JSON
        const elementos = await response.json();

         // Itera sobre cada objeto 'elemento' en el array 'elementos'   <p class="numero_atomico">${elemento.numero_atomico}</p>
        elementos.forEach((elemento, index) => {
             // Obtiene la referencia del elemento del DOM con un id dinámico basado en el índice (por ejemplo, elemento1, elemento2, etc.)
            const elementoDiv = document.getElementById(`elemento${index + 1}`);
            elementoDiv.innerHTML = `
               
                <p class="nombre">${elemento.nombre}</p>
                <p class="simbolo">${elemento.simbolo}</p>
                <p class="radio">${elemento.radio}</p>
                
            `;
        });
    } catch (err) {
        console.error('Error de fetching elementos:', err);
    }
}
        // Cargar elementos al cargar la página
        document.addEventListener('DOMContentLoaded', buscaElemento);
  </script>

   <script> //para encontar el perfil
         
    document.addEventListener('DOMContentLoaded', function() {
        fetch('/perfil')
            .then(response => {
                if (!response.ok) {
                    throw new Error('No autorizado');
                }
                return response.json();
            })
            .then(data => {
                document.getElementById('nombre').textContent = data.nombre;
                document.getElementById('correo').textContent = data.correo;
                document.getElementById('usuario').textContent = data.usuario;
            })
            .catch(error => {
                console.error('Error al cargar el perfil:', error);
                alert('Debes iniciar sesión primero');
                window.location.href = '/login.html';
            });
    });
    
            //aqui le agregue la funcion para obtener el id del juego por medio de la url
              
              function obtenerIdJuegoDeURL() {
                const urlActual = window.location.pathname; // Obtiene la ruta del archivo
                if (urlActual.includes('juego.html')) return 1;
                if (urlActual.includes('juego2.html')) return 2;
                if (urlActual.includes('juego3.html')) return 3;
                if (urlActual.includes('juego4.html')) return 4;
                return null; // En caso de que no se encuentre un juego válido
            }

            // Función para registrar la entrada del usuario al juego
            function registrarEntradaJuego(userId, juegoId) {
                fetch('/api/entrada-juego', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ userId, juegoId })
                })
                .then(response => response.json())
                .then(data => console.log('Entrada registrada:', data))
                .catch(error => console.error('Error registrando entrada:', error));
            }


            //aqui termina 


    document.getElementById('logout').addEventListener('click', function(e) {
        e.preventDefault();
        fetch('/logout', { method: 'POST' })
            .then(response => {
                if (response.ok) {
                    window.location.href = '/login.html';
                } else {
                    throw new Error('Error al cerrar sesión');
                }
            })
            .catch(error => {
                console.error('Error al cerrar sesión:', error);
                alert('Error al cerrar sesión');
            });
    });

</script>

<!--
<script> //AQUI ESTA LA FUNCION PARA SALIR DEL JUEGO SIN GUARDAR O ACEPTAR EL GUARADADO 
    // Variable para indicar si el juego ha terminado
let juegoTerminado = false;

// Manejo del evento beforeunload
window.addEventListener('beforeunload', function (event) {
    if (!juegoTerminado) { // Solo muestra el mensaje si el juego no ha terminado
        const message = "Estás a punto de salir del juego. Los datos podrían no guardarse.";
        event.returnValue = message;
        return message;
    }
});

// Manejo del evento popstate
window.addEventListener('popstate', function (event) {
    if (!juegoTerminado) { // Solo muestra el mensaje si el juego no ha terminado
        const confirmExit = confirm("Estás a punto de salir del juego. Los datos podrían no guardarse.");
        if (!confirmExit) {
            // Si el usuario decide no salir
            history.pushState(null, null, window.location.href);
        }
    }
});

</script>
--> 
<!-- Incluye SweetAlert2 desde CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>//funcion de swt alert al salir de las ventanas
    // Variable para indicar si el juego ha terminado
    let juegoTerminado = false;

    /*
    // Manejo del evento beforeunload (solo para recarga o cierre de pestaña)
    window.addEventListener('beforeunload', function (event) {
        if (!juegoTerminado) {
            const message = "Estás a punto de salir del juego. Los datos podrían no guardarse.";
            event.returnValue = message; // Mensaje predeterminado del navegador
            return message;
        }
    });*/

    // Manejo de clicks en enlaces o botones que navegan fuera del sitio
    document.querySelectorAll('a, button').forEach(function(element) {
        element.addEventListener('click', function(event) {
            if (!juegoTerminado) {
                event.preventDefault(); // Previene la acción predeterminada de navegación
                Swal.fire({
                    title: '¿Estás seguro?',
                    text: "Estás a punto de salir del juego. Los datos podrían no guardarse.",
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#3085d6',
                    cancelButtonColor: '#d33',
                    confirmButtonText: 'Sí, salir',
                    cancelButtonText: 'No, quedarse'
                }).then((result) => {
                    if (result.isConfirmed) {
                        // Permitir navegación después de la confirmación
                        window.location.href = element.href || element.getAttribute('data-href');
                    }
                });
            }
        });
    });

    // Manejo del evento popstate (retroceso del navegador)
    window.addEventListener('popstate', function (event) {
        if (!juegoTerminado) { 
            Swal.fire({
                title: '¿Estás seguro?',
                text: "Estás a punto de salir del juego. Los datos podrían no guardarse.",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sí, salir',
                cancelButtonText: 'No, quedarse'
            }).then((result) => {
                if (result.isConfirmed) {
                    window.history.back();
                } else {
                    history.pushState(null, null, window.location.href);
                }
            });
        }
    });

    // Simulamos una entrada de historial para manejar el popstate correctamente
    window.history.pushState(null, null, window.location.href);
</script>

<!--
<script> //funciones de arratre y almacenamiento en la base y marcador.html
    let contadorArrastres = 0; // Cuenta todos los arrastres (correctos e incorrectos)
    let elementosColocadosCorrectamente = 0; // Cuenta solo los elementos colocados correctamente
    const totalElementos = 10; // Total de elementos que se deben colocar correctamente

    // Carga de los sonidos de acierto y error
    const sonidoAcierto = new Audio('audio/acierto.mp3'); // Ruta al archivo de sonido de acierto
    const sonidoError = new Audio('audio/error.mp3'); // Ruta al archivo de sonido de error

    function allowDrop(event) {
        event.preventDefault();
    }

    function drag(event) {
        const elemento = event.target;
        const nombreElemento = elemento.querySelector('.nombre').textContent.trim();
        event.dataTransfer.setData('nombreElemento', nombreElemento);
        event.dataTransfer.setData('elementoId', elemento.id);
    }

    function drop(event) {
        event.preventDefault();
        contadorArrastres++; // Incrementa el contador de arrastres totales en cada intento

        const nombreElemento = event.dataTransfer.getData('nombreElemento');
        const dropTarget = event.currentTarget;
        const nombreCelda = dropTarget.getAttribute('data-nombre').trim();

        console.log(`Comparando: ${nombreElemento} con ${nombreCelda}`);

        if (nombreElemento.toLowerCase() === nombreCelda.toLowerCase()) {
            const elementoId = event.dataTransfer.getData('elementoId');
            const elemento = document.getElementById(elementoId);
            dropTarget.appendChild(elemento);
            elemento.style.position = 'relative';
            elemento.style.left = '0';
            elemento.style.top = '0';
            elemento.classList.add('colocado');
            elemento.setAttribute('draggable', 'false'); // Deshabilita el arrastre
            elemento.removeEventListener('dragstart', drag); // Remueve el evento de arrastre
            
            elementosColocadosCorrectamente++; // Incrementa el contador de elementos colocados correctamente
            sonidoAcierto.play(); // Reproduce el sonido de acierto
        }else {
            sonidoError.play(); // Reproduce el sonido de error
        }

        // Actualiza el contador de arrastres en el DOM
        document.getElementById('contadorArrastres').textContent = contadorArrastres;

        // Verifica si todos los elementos han sido colocados correctamente
        if (elementosColocadosCorrectamente === totalElementos) {
            // Guardar el resultado del juego en la base de datos
            const userId = document.getElementById('usuario').textContent; // Obtiene el userId del perfil cargado
            const juegoId = obtenerIdJuegoDeURL(); // Obtiene el ID del juego actual

            guardarResultadoJuego(userId, juegoId, contadorArrastres);
        }
    }

    // Función para guardar el resultado del juego
    function guardarResultadoJuego(userId, juegoId, numArrastres) {
        const nombreJuego = obtenerNombreJuego(juegoId);

        fetch('/guardar-resultado', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ userId, juegoId, numArrastres })
        })
        .then(response => response.json())
        .then(data => {
            console.log('Resultado guardado:', data);

            if (data.message === 'Resultado guardado correctamente') {
                // Redirige a marcador.html
                window.location.href = 'marcador.html';
            } else {
                alert('Error al guardar resultados: ' + (data.error || 'Error desconocido'));
                console.error('Detalles del error:', data);
            }
        })
        .catch(error => {
            console.error('Error de red:', error);
            alert('Error de red, por favor intenta nuevamente.');
        });
    }

    // Función para obtener el nombre del juego basado en el ID, los swich estan en prueba.js
    function obtenerNombreJuego(juegoId) {
        switch (parseInt(juegoId)) {
            case 1: return 'Bloques';
            case 2: return 'Elementos';
            case 3: return 'RadioA';
            case 4: return 'Electronegatividad';
            default: return 'Juego desconocido';
        }
    }
</script>
-->
<script>
    // Variables para contar arrastres y elementos colocados
    let contadorArrastres = 0; // Cuenta todos los arrastres (correctos e incorrectos)
    let elementosColocadosCorrectamente = 0; // Cuenta solo los elementos colocados correctamente
    const totalElementos = 10; // Total de elementos que se deben colocar correctamente
    
    // Carga de los sonidos de acierto y error
    const sonidoAcierto = new Audio('audio/acierto.mp3'); // Ruta al archivo de sonido de acierto
    const sonidoError = new Audio('audio/error.mp3'); // Ruta al archivo de sonido de error
    
    function allowDrop(event) {
        event.preventDefault();
    }
    
    function drag(event) {
        event.dataTransfer.setData('text', event.target.id);  // Guardar el ID del elemento arrastrado
        event.dataTransfer.setDragImage(event.target, event.target.clientWidth / 2, event.target.clientHeight / 2);  // Centramos el punto de agarre
        const elemento = event.target;
        const nombreElemento = elemento.querySelector('.nombre').textContent.trim();
        event.dataTransfer.setData('nombreElemento', nombreElemento);
        event.dataTransfer.setData('elementoId', elemento.id);
    }
    
    function drop(event) {
    event.preventDefault();
    contadorArrastres++; // Incrementa el contador de arrastres totales en cada intento

    const nombreElemento = event.dataTransfer.getData('nombreElemento');
    const dropTarget = event.currentTarget;
    const nombreCelda = dropTarget.getAttribute('data-nombre').trim();

    console.log(`Comparando: ${nombreElemento} con ${nombreCelda}`);

    if (nombreElemento.toLowerCase() === nombreCelda.toLowerCase()) {
        const elementoId = event.dataTransfer.getData('elementoId');
        const elemento = document.getElementById(elementoId);

        // Ajusta la posición del elemento dentro del contenedor "centrado"
        dropTarget.appendChild(elemento);
        elemento.style.position = 'absolute';  
        elemento.style.left = '50%';  // Posicionamos en el centro del contenedor
        elemento.style.top = '50%';
        elemento.style.transform = 'translate(-50%, -50%)';  // Centramos completamente el elemento
        elemento.style.zIndex = '10'; // Asegura que el elemento esté sobre el contenido existente
        elemento.classList.add('colocado');
        elemento.setAttribute('draggable', 'false'); // Deshabilita el arrastre después de soltar
        elemento.removeEventListener('dragstart', drag); // Remueve el evento de arrastre

        elementosColocadosCorrectamente++; // Incrementa el contador de elementos colocados correctamente
        sonidoAcierto.play(); // Reproduce el sonido de acierto
    } else {
        sonidoError.play(); // Reproduce el sonido de error
    }

    // Actualiza el contador de arrastres en el DOM
    document.getElementById('contadorArrastres').textContent = contadorArrastres;

    // Verifica si todos los elementos han sido colocados correctamente
    if (elementosColocadosCorrectamente === totalElementos) {
        Swal.fire({
            title: '¡Felicidades!',
            text: `Has colocado todos los elementos correctamente en ${contadorArrastres} arrastres.`,
            icon: 'success',
            confirmButtonText: 'Aceptar'
        }).then(() => {
            // Guardar el resultado del juego en la base de datos
            const userId = document.getElementById('usuario').textContent; // Obtiene el userId del perfil cargado
            const juegoId = obtenerIdJuegoDeURL(); // Obtiene el ID del juego actual

            guardarResultadoJuego(userId, juegoId, contadorArrastres);
        });
    }
}

    
    // Función para guardar el resultado del juego
    function guardarResultadoJuego(userId, juegoId, numArrastres) {
        const nombreJuego = obtenerNombreJuego(juegoId);
    
        fetch('/guardar-resultado', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ userId, juegoId, numArrastres })
        })
        .then(response => response.json())
        .then(data => {
            console.log('Resultado guardado:', data);
    
            if (data.message === 'Resultado guardado correctamente') {
                // Redirige a marcador.html
                window.location.href = 'marcador.html';
            } else {
                Swal.fire({
                    title: 'Error',
                    text: 'Error al guardar resultados: ' + (data.error || 'Error desconocido'),
                    icon: 'error',
                    confirmButtonText: 'Aceptar'
                });
                console.error('Detalles del error:', data);
            }
        })
        .catch(error => {
            console.error('Error de red:', error);
            Swal.fire({
                title: 'Error de red',
                text: 'Por favor, intenta nuevamente.',
                icon: 'error',
                confirmButtonText: 'Aceptar'
            });
        });
    }
    
    // Función para obtener el nombre del juego basado en el ID
    function obtenerNombreJuego(juegoId) {
        switch (parseInt(juegoId)) {
            case 1: return 'Bloques';
            case 2: return 'Elementos';
            case 3: return 'RadioA';
            case 4: return 'Electronegatividad';
            default: return 'Juego desconocido';
        }
    }
    </script>
    



   </body>
</html>