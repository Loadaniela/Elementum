<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario</title>
    <link rel="stylesheet" href="/css/estilosJuego.css">
    <link rel="icon" href="/Imagenes/icon-512x512.png">
</head>
<body>
    <main>

        <input type="checkbox" id="toggle">
        <label for="toggle" class="hamburger"><span></span><span></span><span></span></label>
        <nav class="menu">
            <ul>
                <li><a href="#" >PERFIL DEL JUGADOR</a></li>
                <p><strong style="color: orange;">Jugador:</strong> <span id="nombre" style="color: white;"></span></p>
                <p><strong style="color: orange;">Correo:</strong> <span id="correo" style="color: white;"></span></p>
                <p><strong style="color: orange;">Usuario:</strong> <span id="usuario" style="color: white;"></span></p>
                <li><a href="pagina1.html">Menú Principal</a></li>
                <li><a href="login.html" id="logout">Cerrar sesión</a></li>
                <img src="Imagenes/oncahui.png" alt="panda" width="220" height="350">
            </ul>
        </nav>

        <div id="menuoculto">
            <a id="menu1" href="juego4.html">Jugar juego 4! </a>
     </div>
        <h1 class="glitch"  data-text="Elementum">ELEMENTUM</h1>

    
        <div id="contenedorFormulario" style="text-align: center;">

        <h1 id="formulario" style="color: orange"  style="text-shadow: 1px rgb(rgb(235, 164, 72), rgb(180, 231, 39), rgb(255, 102, 0));">Formulario Juego 4: Electronegatividad</h1>
        <form id="formularioPregunta">
            <label for="pregunta" >Pregunta:</label><br>
            <input type="text" id="pregunta" name="pregunta" required  placeholder="Escribe tu pregunta aquí"><br><br>
    
            <label for="respuestaCorrecta">Respuesta correcta:</label><br>
            <select id="respuestaCorrecta" name="respuestaCorrecta" required>
                <option value="true">Verdadero</option>
                <option value="false">Falso</option>
            </select><br><br>
    
            <label for="simboloElemento">Elige el elemento sobre el cual se formulará la pregunta:</label><br>
            <select id="simboloElemento" name="simboloElemento" required>
                <option value="" disabled selected>Seleccionar elemento</option>
                <!-- Aquí van los símbolos de los elementos químicos -->
                <option value="H">Hidrógeno (H)</option>
                <option value="He">Helio (He)</option>
                <option value="Li">Litio (Li)</option>
                <option value="Be">Berilio (Be)</option>
                <option value="B">Boro (B)</option>
                <option value="C">Carbono (C)</option>
                <option value="N">Nitrógeno (N)</option>
                <option value="O">Oxígeno (O)</option>
                <option value="F">Flúor (F)</option>
                <option value="Ne">Neón (Ne)</option>
                <option value="Na">Sodio (Na)</option>
                <option value="Mg">Magnesio (Mg)</option>
                <option value="Al">Aluminio (Al)</option>
                <option value="Si">Silicio (Si)</option>
                <option value="P">Fósforo (P)</option>
                <option value="S">Azufre (S)</option>
                <option value="Cl">Cloro (Cl)</option>
                <option value="Ar">Argón (Ar)</option>
                <option value="K">Potasio (K)</option>
                <option value="Ca">Calcio (Ca)</option>
                <option value="Sc">Escandio (Sc)</option>
                <option value="Ti">Titanio (Ti)</option>
                <option value="V">Vanadio (V)</option>
                <option value="Cr">Cromo (Cr)</option>
                <option value="Mn">Manganeso (Mn)</option>
                <option value="Fe">Hierro (Fe)</option>
                <option value="Co">Cobalto (Co)</option>
                <option value="Ni">Níquel (Ni)</option>
                <option value="Cu">Cobre (Cu)</option>
                <option value="Zn">Zinc (Zn)</option>
                <option value="Ga">Galio (Ga)</option>
                <option value="Ge">Germanio (Ge)</option>
                <option value="As">Arsénico (As)</option>
                <option value="Se">Selenio (Se)</option>
                <option value="Br">Bromo (Br)</option>
                <option value="Kr">Kriptón (Kr)</option>
                <option value="Rb">Rubidio (Rb)</option>
                <option value="Sr">Estroncio (Sr)</option>
                <option value="Y">Itrio (Y)</option>
                <option value="Zr">Circonio (Zr)</option>
                <option value="Nb">Niobio (Nb)</option>
                <option value="Mo">Molibdeno (Mo)</option>
                <option value="Tc">Tecnecio (Tc)</option>
                <option value="Ru">Rutenio (Ru)</option>
                <option value="Rh">Rodio (Rh)</option>
                <option value="Pd">Paladio (Pd)</option>
                <option value="Ag">Plata (Ag)</option>
                <option value="Cd">Cadmio (Cd)</option>
                <option value="In">Indio (In)</option>
                <option value="Sn">Estaño (Sn)</option>
                <option value="Sb">Antimonio (Sb)</option>
                <option value="Te">Telurio (Te)</option>
                <option value="I">Yodo (I)</option>
                <option value="Xe">Xenón (Xe)</option>
                <option value="Cs">Cesio (Cs)</option>
                <option value="Ba">Bario (Ba)</option>
                <option value="La">Lantano (La)</option>
                <option value="Ce">Cerio (Ce)</option>
                <option value="Pr">Praseodimio (Pr)</option>
                <option value="Nd">Neodimio (Nd)</option>
                <option value="Pm">Prometio (Pm)</option>
                <option value="Sm">Samario (Sm)</option>
                <option value="Eu">Europio (Eu)</option>
                <option value="Gd">Gadolinio (Gd)</option>
                <option value="Tb">Terbio (Tb)</option>
                <option value="Dy">Disprosio (Dy)</option>
                <option value="Ho">Holmio (Ho)</option>
                <option value="Er">Erbio (Er)</option>
                <option value="Tm">Tulio (Tm)</option>
                <option value="Yb">Iterbio (Yb)</option>
                <option value="Lu">Lutecio (Lu)</option>
                <option value="Hf">Hafnio (Hf)</option>
                <option value="Ta">Tantalio (Ta)</option>
                <option value="W">Wolframio (W)</option>
                <option value="Re">Renio (Re)</option>
                <option value="Os">Osmio (Os)</option>
                <option value="Ir">Iridio (Ir)</option>
                <option value="Pt">Platino (Pt)</option>
                <option value="Au">Oro (Au)</option>
                <option value="Hg">Mercurio (Hg)</option>
                <option value="Tl">Talio (Tl)</option>
                <option value="Pb">Plomo (Pb)</option>
                <option value="Bi">Bismuto (Bi)</option>
                <option value="Po">Polonio (Po)</option>
                <option value="At">Astato (At)</option>
                <option value="Rn">Radón (Rn)</option>
                <option value="Fr">Francio (Fr)</option>
                <option value="Ra">Radio (Ra)</option>
                <option value="Ac">Actinio (Ac)</option>
                <option value="Th">Torio (Th)</option>
                <option value="Pa">Protactinio (Pa)</option>
                <option value="U">Uranio (U)</option>
                <option value="Np">Neptunio (Np)</option>
                <option value="Pu">Plutonio (Pu)</option>
                <option value="Am">Americio (Am)</option>
                <option value="Cm">Curio (Cm)</option>
                <option value="Bk">Berkelio (Bk)</option>
                <option value="Cf">Californio (Cf)</option>
                <option value="Es">Einstenio (Es)</option>
                <option value="Fm">Fermio (Fm)</option>
                <option value="Md">Mendelevio (Md)</option>
                <option value="No">Nobelio (No)</option>
                <option value="Lr">Lawrencio (Lr)</option>
                <option value="Rf">Rutherfordio (Rf)</option>
                <option value="Db">Dubnio (Db)</option>
                <option value="Sg">Seaborgio (Sg)</option>
                <option value="Bh">Bohrio (Bh)</option>
                <option value="Hs">Hassio (Hs)</option>
                <option value="Mt">Meitnerio (Mt)</option>
                <option value="Ds">Darmstadtio (Ds)</option>
                <option value="Rg">Roentgenio (Rg)</option>
                <option value="Cn">Copernicio (Cn)</option>
                <option value="Nh">Nihonio (Nh)</option>
                <option value="Fl">Flerovio (Fl)</option>
                <option value="Mc">Moscovio (Mc)</option>
                <option value="Lv">Livermorio (Lv)</option>
                <option value="Ts">Tenesino (Ts)</option>
                <option value="Og">Oganesón (Og)</option>

                            
            </select><br><br>
    
            <button type="submit">Agregar Pregunta</button>
        </form>
    
        <p id="mensaje"></p>

        </div>


      


    </main>
   
    <script> //envio del formulario
        // Captura el  envío del formulario
        document.getElementById('formularioPregunta').addEventListener('submit', function(event) {
            event.preventDefault();

            // Obtén los valores del formulario
            const pregunta = document.getElementById('pregunta').value;
            const respuestaCorrecta = document.getElementById('respuestaCorrecta').value === 'true';
            const simboloElemento = document.getElementById('simboloElemento').value;

            // Envía los datos al servidor usando fetch
            fetch('/agregar-pregunta', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    question: pregunta,
                    correctAnswer: respuestaCorrecta,
                    elementSymbol: simboloElemento
                })
            })
            .then(response => response.json())
            .then(data => {
                // Muestra un mensaje basado en la respuesta del servidor
                const mensaje = document.getElementById('mensaje');
                if (data.success) {
                    mensaje.textContent = 'Pregunta agregada exitosamente a Elementum.';
                    mensaje.style.color = 'green';

                     // Deja el formulario en limpio
                     document.getElementById('formularioPregunta').reset();
                } else {
                    mensaje.textContent = 'Error al agregar la pregunta al juego.';
                    mensaje.style.color = 'red';
                }
            })
            .catch(error => {
                console.error('Error al enviar los datos:', error);
                document.getElementById('mensaje').textContent = 'Error al enviar los datos verifica que tenga signo de interrogación.';
            });
        });
    </script>

    <script> //para cargar el perfil del jugador
        document.addEventListener('DOMContentLoaded', function() {
            fetch('/perfil')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('No autorizado');
                    }
                    return response.json();
                })
                .then(data => {
                    document.getElementById('nombre').textContent = data.nombre;
                    document.getElementById('correo').textContent = data.correo;
                    document.getElementById('usuario').textContent = data.usuario;
                })
                .catch(error => {
                    console.error('Error al cargar el perfil:', error);
                    alert('Debes iniciar sesión primero');
                    window.location.href = '/login.html';
                });
        });

        document.getElementById('logout').addEventListener('click', function(e) {
            e.preventDefault();
            fetch('/logout', { method: 'POST' })
                .then(response => {
                    if (response.ok) {
                        window.location.href = '/login.html';
                    } else {
                        throw new Error('Error al cerrar sesión');
                    }
                })
                .catch(error => {
                    console.error('Error al cerrar sesión:', error);
                    alert('Error al cerrar sesión');
                });
        });
    </script>
</body>
</html>